[tool:pytest]
DJANGO_SETTINGS_MODULE = config.settings_test

# Configuración para tests realistas
python_files = test_*.py
python_classes = Test* *Test *TestCase
python_functions = test_*

# Directorios de tests
testpaths = tests/realistic tests/integration tests/unit

# Configuración de base de datos para tests realistas
addopts = 
    --verbose
    --tb=short
    --strict-markers
    --strict-config
    --reuse-db
    --nomigrations
    --timeout=300

# Marcadores personalizados
markers =
    redis: tests que requieren Redis real
    celery: tests que requieren workers Celery reales  
    concurrency: tests de concurrencia real
    database: tests que requieren PostgreSQL real
    slow: tests que pueden tardar más de 30 segundos
    integration: tests de integración completa
    realistic: tests con servicios Docker reales

# Configuración de timeouts
timeout = 300
timeout_method = thread

# Configuración para tests lentos
durations = 10
durations_min = 1.0

# Configuración de fallos
maxfail = 10

# Configuración de warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::django.utils.deprecation.RemovedInDjango50Warning

# Variables de entorno específicas
env =
    CELERY_TASK_ALWAYS_EAGER=False
    DJANGO_SETTINGS_MODULE=config.settings_test